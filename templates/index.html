<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Brain Tumor Detection AI</title>

<link rel="stylesheet" href="{{ url_for('static', path='style.css') }}">
<script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>

<div class="theme-toggle" onclick="toggleTheme()">
  <i data-lucide="sun"></i>
</div>

<div class="container">

  <h1>ðŸ§  Brain Tumor Detection AI</h1>
  <p class="subtitle">Upload one or more MRI scans for analysis</p>

  <form 
    action="/predict" 
    method="POST" 
    enctype="multipart/form-data"
    onsubmit="showLoader()">

    <div class="drop-area" id="drop-area">
      <p>Drag & Drop Image Here</p>
      <span>OR</span>
      <label for="fileInput" class="custom-btn">Browse Files</label>
      <input 
        type="file"
        id="fileInput"
        name="file"
        multiple
        accept="image/*"
        required
        onchange="previewImages(event)">
    </div>

    <div id="preview"></div>

    <button type="submit" class="predict-btn">Analyze Scan</button>

  </form>

  {% if result %}
  <div class="result-box">
    <h2>{{ result }}</h2>
    <p>Confidence: {{ confidence }}</p>
  </div>
  {% endif %}

  <div class="loader" id="loader"></div>

</div>

<script>
lucide.createIcons();

/* IMAGE PREVIEW */
function previewImages(event) {
  const preview = document.getElementById("preview");
  preview.innerHTML = "";

  [...event.target.files].forEach(file => {
    const reader = new FileReader();
    reader.onload = () => {
      const img = document.createElement("img");
      img.src = reader.result;
      preview.appendChild(img);
    };
    reader.readAsDataURL(file);
  });
}

/* DRAG AND DROP */
const dropArea = document.getElementById("drop-area");
const fileInput = document.getElementById("fileInput");

dropArea.addEventListener("dragover", (e) => {
  e.preventDefault();
  dropArea.classList.add("active");
});

dropArea.addEventListener("dragleave", () => {
  dropArea.classList.remove("active");
});

dropArea.addEventListener("drop", (e) => {
  e.preventDefault();
  dropArea.classList.remove("active");
  fileInput.files = e.dataTransfer.files;
  previewImages({ target: fileInput });
});

/* LOADING ANIMATION */
function showLoader() {
  document.getElementById("loader").style.display = "block";
}

/* THEME TOGGLE */
function toggleTheme() {
  document.body.classList.toggle("dark-mode");
}
</script>

</body>
</html>
